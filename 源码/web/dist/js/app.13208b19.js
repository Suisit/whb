(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0156":function(e,t,r){"use strict";r("44bd")},"034f":function(e,t,r){"use strict";r("85ec")},"0967":function(e,t,r){},1291:function(e,t,r){"use strict";r("7d4a")},"15a8":function(e,t,r){"use strict";r("5eef")},"1ab8":function(e,t,r){"use strict";r("554d")},2284:function(e,t,r){"use strict";r("0967")},"28db":function(e,t,r){"use strict";r("703a")},"2dab":function(e,t,r){"use strict";r("db27")},"38d0":function(e,t,r){"use strict";r("3c26")},3922:function(e,t,r){},"3b02":function(e,t,r){},"3c26":function(e,t,r){},4020:function(e,t,r){"use strict";r("cf9f")},"44bd":function(e,t,r){},"45ff":function(e,t,r){"use strict";r("6273")},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="4678"},"554d":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("bc3a"),s=r.n(n),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view",{staticStyle:{height:"100%"}})],1)},i=[],c={},u=c,l=(r("034f"),r("2877")),d=Object(l["a"])(u,o,i,!1,null,null,null),m=d.exports,p=(r("99af"),r("96cf"),r("1da1")),f=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-layout",{staticStyle:{"background-color":"white"}},[r("a-layout-header",{staticClass:"header",staticStyle:{"background-color":"white"}},[r("div",{staticClass:"logo"},[r("a-avatar",{style:{backgroundColor:"#ffbf00",verticalAlign:"middle"},attrs:{id:"avatar",size:"large"}},[e._v(" "+e._s(e.$store.state.user.username)+" ")]),r("a-button",{attrs:{id:"layout"},on:{click:e.layout}},[e._v("退出登录")])],1),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"light",mode:"horizontal","default-selected-keys":["1"]}},[r("a-menu-item",{key:"1",on:{click:function(t){return e.$router.push("/")}}},[e._v(" 所有课程 ")]),r("a-menu-item",{key:"2",on:{click:function(t){return e.$router.push("/myCourse")}}},[e._v(" "+e._s("student"==e.$store.state.user.role?"我加入的课程":"我创建的课程")+" ")])],1)],1),r("router-view")],1)},b=[],g={created:function(){},data:function(){return{collapsed:!1}},methods:{layout:function(){this.$cookies.remove("token"),this.$router.push("/login")}}},v=g,y=(r("ef1e"),Object(l["a"])(v,h,b,!1,null,"540707a1",null)),w=y.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-layout",{staticStyle:{height:"100%"},attrs:{id:"components-layout-demo-custom-trigger"}},[r("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[r("a-menu",{attrs:{theme:"light",mode:"inline","default-selected-keys":["1"]}})],1),r("a-layout",[r("div",{staticClass:"content"},[r("a-layout-content",{style:{padding:"24px",background:"#fff",minHeight:"280px"}},[r("a-input-search",{attrs:{placeholder:"输入搜索内容","enter-button":""},on:{search:e.onSearch}}),r("br"),r("br"),"teacher"==e.$store.state.user.role?r("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("添加课程")]):e._e(),r("a-modal",{attrs:{title:"创建课程",visible:e.visible,"confirm-loading":e.confirmLoading,cancelText:"取消",okText:"确定","destroyOnClose:true":""},on:{ok:e.handleOk,cancel:e.handleCancel,change:e.upload}},[r("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:"课程名称"}},[r("a-input",{model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1),r("a-form-item",{attrs:{label:"课程封面图"}},[r("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:e.$http.defaults.baseURL+"/upload","before-upload":e.beforeUpload},on:{change:e.upload}},[e.imageUrl?r("img",{attrs:{id:"fileimage",src:e.imageUrl,alt:"avatar"}}):r("div",[r("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),r("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1)],1)],1),r("a-row",[r("br"),e._l(e.newcourseLists,(function(t){return r("a-list",{key:t._id,attrs:{grid:{gutter:16,column:4}}},[r("a-list-item",[r("a-card",{staticStyle:{width:"240px"},attrs:{hoverable:""},on:{click:function(r){return e.addCourse(t)}}},[r("img",{attrs:{slot:"cover",alt:t.name,src:t.image},slot:"cover"}),r("a-card-meta",{attrs:{title:t.name}})],1)],1)],1)})),r("a-modal",{attrs:{title:"加入课程",visible:e.visibleAdd,"confirm-loading":e.confirmLoading},on:{ok:e.handleAddOk,cancel:e.handleAddCancel}},[r("p",[e._v("是否加入此课程")])])],2)],1)],1)])],1)],1)},k=[],_=(r("caad"),r("b0c0"),r("ac1f"),r("2532"),r("841c"),r("b85c")),j={data:function(){return{collapsed:!1,url:"",imageUrl:"",loading:!1,ModalText:"Content of the modal",visible:!1,visibleAdd:!1,confirmLoading:!1,confirmLoadingAdd:!1,courseLists:"",newcourseLists:"",course:{name:"",image:"",createUser:this.$store.state.user._id},nowItem:"",courseAdd:[]}},created:function(){this.fetchCoursesList(),this.fetchAddCourseList(),console.log(this.$store.state.user._id)},methods:{showModal:function(){this.visible=!0},onSearch:function(e){var t,r=[],a=Object(_["a"])(this.courseLists);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.name.search(e)>-1&&r.push(n)}}catch(s){a.e(s)}finally{a.f()}this.newcourseLists=r},fetchCoursesList:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/amount/all");case 2:r=t.sent,e.courseLists=r.data,e.newcourseLists=r.data;case 5:case"end":return t.stop()}}),t)})))()},fetchAddCourseList:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("add-course",{params:{query:{where:{user:e.$store.state.user._id}}}});case 2:r=t.sent,a=Object(_["a"])(r.data);try{for(a.s();!(n=a.n()).done;)s=n.value,e.courseAdd.push(s.course)}catch(o){a.e(o)}finally{a.f()}case 5:case"end":return t.stop()}}),t)})))()},handleOk:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("courses",t.course);case 2:t.fetchCoursesList(),setTimeout((function(){t.visible=!1,t.confirmLoading=!1,t.imageUrl="",t.course.name=""}),0);case 4:case"end":return e.stop()}}),e)})))()},handleCancel:function(e){console.log("Clicked cancel button"),this.visible=!1,this.imageUrl="",this.course.name=""},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("You can only upload JPG file!");var r=e.size/1024/1024<2;return r||this.$message.error("Image must smaller than 2MB!"),t&&r},upload:function(e){if(e){if("uploading"===e.file.status)return void(this.loading=!0);"done"===e.file.status&&(this.imageUrl=e.file.response.url,this.course.image=e.file.response.url,this.loading=!1,this.$message.success("上传成功"))}},addCourse:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.courseAdd.includes(e._id)){r.next=7;break}if("student"!=t.$store.state.user.role){r.next=4;break}return r.next=4,t.$http.post("statement",{actor:{objectType:"Agent",account:{id:t.$store.state.user._id,name:t.$store.state.user.username,realname:t.$store.state.user.realname}},verb:{id:t.$http.defaults.baseURL+"course/".concat(e._id,"/video"),display:{en_US:"open",zh_CN:"进入"}},object:{id:e._id,definition:{name:e.name,type:"Course",course:e._id}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 4:t.$router.push("course/".concat(e._id,"/video")),r.next=8;break;case 7:e.createUser===t.$store.state.user._id?t.$router.push("course/".concat(e._id,"/video")):(t.showAddModal(),t.nowItem=e);case 8:case"end":return r.stop()}}),r)})))()},showAddModal:function(){this.visibleAdd=!0},handleAddOk:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.confirmLoadingAdd=!0,e.next=3,t.$http.post("add-course",{user:t.$store.state.user._id,course:t.nowItem._id,teacher:t.nowItem.createUser});case 3:if("student"!=t.$store.state.user.role){e.next=6;break}return e.next=6,t.$http.post("statement",{actor:{objectType:"Agent",account:{id:t.$store.state.user._id,name:t.$store.state.user.username,realname:t.$store.state.user.realname}},verb:{id:t.$http.defaults.baseURL+"/add-course",display:{en_US:"addCourse",zh_CN:"加入"}},object:{id:t.nowItem._id,definition:{name:t.nowItem.name,type:"Course",course:t.nowItem._id}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 6:t.visibleAdd=!1,t.confirmLoadingAdd=!1,t.fetchAddCourseList();case 9:case"end":return e.stop()}}),e)})))()},handleAddCancel:function(e){console.log("Clicked cancel button"),this.visibleAdd=!1}}},$=j,S=(r("cccb"),Object(l["a"])($,x,k,!1,null,null,null)),I=S.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-layout",{staticStyle:{"background-color":"white",height:"100%"},attrs:{id:"components-layout-demo-custom-trigger"}},[r("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[e.$route.meta.key?r("a-menu",{staticStyle:{height:"100%"},attrs:{theme:"light",mode:"inline","default-selected-keys":["1"],"selected-keys":[e.$route.meta.key]}},[r("a-menu-item",{key:"1",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/video")}}},[r("a-icon",{attrs:{type:"video-camera"}}),r("span",[e._v("课程视频")])],1),r("a-menu-item",{key:"2",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/debate")}}},[r("a-icon",{attrs:{type:"user"}}),r("span",[e._v("讨论区")])],1),r("a-menu-item",{key:"3",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/courseware")}}},[r("a-icon",{attrs:{type:"download"}}),r("span",[e._v("课件")])],1),r("a-menu-item",{key:"4",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/work")}}},[r("a-icon",{attrs:{type:"solution"}}),r("span",[e._v("作业")])],1),r("a-menu-item",{key:"5",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/exam")}}},[r("a-icon",{attrs:{type:"solution"}}),r("span",[e._v("考试")])],1),e.$store.state.user._id===e.course.createUser?r("a-menu-item",{key:"6",on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/statement")}}},[r("a-icon",{attrs:{type:"solution"}}),r("span",[e._v("学生学习记录")])],1):e._e()],1):e._e()],1),r("router-view",{staticClass:"router-view",staticStyle:{width:"100%","overflow-y":"scroll","overflow-x":"hidden"}})],1)},R=[],O={props:{courseId:""},data:function(){return{collapsed:!1,course:""}},created:function(){this.my()},methods:{my:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId));case 2:r=t.sent,console.log(r),e.course=r.data;case 5:case"end":return t.stop()}}),t)})))()}}},F=O,L=(r("2dab"),Object(l["a"])(F,C,R,!1,null,"513ef4d3",null)),A=L.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLogin?r("a-card",{staticClass:"login-card",attrs:{title:"请先登录",headStyle:{textAlign:"center"}}},[r("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请输入用户名"}]}],expression:"[\n            'userName',\n            {\n              rules: [{ required: true, message: '请输入用户名' }],\n            },\n          ]"}],attrs:{placeholder:"用户名"}},[r("a-icon",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}]}],expression:"[\n            'password',\n            {\n              rules: [{ required: true, message: '请输入密码' }],\n            },\n          ]"}],attrs:{type:"password",placeholder:"密码"}},[r("a-icon",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-button",{staticClass:"login-form-button",attrs:{type:"primary","html-type":"submit"}},[e._v(" 登录 ")]),e._v(" 或 "),r("a",{on:{click:function(t){return t.preventDefault(),e.register(t)}}},[e._v(" 注册")])],1)],1)],1):r("a-card",{staticClass:"register-card",attrs:{title:"注册",headStyle:{textAlign:"center"}}},[r("a-form-model",e._b({ref:"ruleForm",staticClass:"register-form",attrs:{model:e.ruleForm,rules:e.rules}},"a-form-model",e.layout,!1),[r("a-form-model-item",{attrs:{"has-feedback":"",label:"用户名",prop:"userName"}},[r("a-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"真实姓名",prop:"realName"}},[r("a-input",{model:{value:e.ruleForm.realName,callback:function(t){e.$set(e.ruleForm,"realName",t)},expression:"ruleForm.realName"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"密码",prop:"pass"}},[r("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"验证密码",prop:"checkPass"}},[r("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),r("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" 提交 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v(" 重置 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.isLogin=!0}}},[e._v(" 返回 ")])],1)],1)],1)],1)},q=[],E={beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},data:function(){var e,t=this,r=function(r,a,n){if(clearTimeout(e),!a)return n(new Error("请输入用户名"));e=setTimeout(Object(p["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("users?username=".concat(t.ruleForm.userName));case 2:r=e.sent,console.log(r.data),r.data?n(new Error("用户名已存在")):n();case 5:case"end":return e.stop()}}),e)}))),1e3)},a=function(e,t,r){if(!t)return r(new Error("请输入真实姓名"));r()},n=function(e,r,a){""===r?a(new Error("请输入密码")):(""!==t.ruleForm.checkPass&&t.$refs.ruleForm.validateField("checkPass"),a())},s=function(e,r,a){""===r?a(new Error("请再此输入密码")):r!==t.ruleForm.pass?a(new Error("两次输入不一致")):a()};return{isLogin:!0,ruleForm:{pass:"",checkPass:"",userName:"",realName:""},rules:{pass:[{validator:n,trigger:"change"}],checkPass:[{validator:s,trigger:"change"}],userName:[{validator:r,trigger:"change"}],realName:[{validator:a,trigger:"change"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}}}},methods:{register:function(){this.isLogin=!1},submitregister:function(){return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},login:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={username:e.form.getFieldValue("userName"),password:e.form.getFieldValue("password")},t.next=3,e.$http.post("/auth/login",r);case 3:a=t.sent,e.$cookies.set("token",a.data.token),e.$router.push("/"),e.$message.success("登录成功");case 7:case"end":return t.stop()}}),t)})))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e?t.$message.success("用户不存在或密码错误"):t.login()}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a={username:t.ruleForm.userName,password:t.ruleForm.pass,realname:t.ruleForm.realName,role:"student"},e.next=4,t.$http.post("/auth/register",a);case 4:t.isLogin=!0,t.$message.success("注册成功"),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()}}},z=E,Q=(r("c2ac"),Object(l["a"])(z,V,q,!1,null,"6037222c",null)),D=Q.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-layout",{staticStyle:{"background-color":"white"}},[r("a-layout-content",{style:{padding:"24px",background:"#fff",minHeight:"220px"}},[r("video",{ref:"video",attrs:{id:"video",src:e.playVideo.file,controls:"controls",width:"960px",height:"540px",autoplay:"",pause:""}})]),r("a-layout-sider",{staticStyle:{"background-color":"white","margin-top":"20px"},attrs:{width:"280px"}},[r("div",{staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":e.busy,"infinite-scroll-distance":1}},[r("a-list",e._l(e.course.blocks,(function(t){return r("a-list-item",{key:t._id},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return r.preventDefault(),e.videoPlay(t)}}},[r("a-icon",{attrs:{type:"play-circle"}}),r("a",{staticStyle:{"margin-left":"8px","text-overflow":"ellipsis",overflow:"hidden"}},[e._v(e._s(t.name))])],1),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.deleteItem(t._id)}}},[e._v("删除")]):e._e()],1)})),1)],1),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{staticClass:"addButton",attrs:{type:"primary"},on:{click:e.showModal}},[e._v(" 添加课时 ")]):e._e(),r("a-modal",{attrs:{destroyOnClose:"",title:"Title",visible:e.visible,"confirm-loading":e.confirmLoading,okText:"确定",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:"课时名称"}},[r("a-input",{model:{value:e.block.name,callback:function(t){e.$set(e.block,"name",t)},expression:"block.name"}})],1),r("a-form-item",{attrs:{label:"上传视频"}},[r("a-upload",{attrs:{accept:"video/*,",name:"file",multiple:!0,action:e.$http.defaults.baseURL+"/upload"},on:{change:e.handleChange}},[r("a-button",[r("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传")],1)],1)],1),r("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}})],1)],1)],1)],1)],1)},T=[],N=r("487a"),M=r.n(N),P={directives:{infiniteScroll:M.a},props:{courseId:""},data:function(){return{loading:!1,block:{name:"",file:"",course:""},course:{},visible:!1,confirmLoading:!1,playVideo:"",busy:!1,courseRole:""}},created:function(){this.fetch(),this.my()},mounted:function(){var e=this,t=document.getElementById("video");t.addEventListener("pause",Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("student"!=e.$store.state.user.role){r.next=3;break}return r.next=3,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"paused",zh_CN:"暂停"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},result:{timestamp:t.currentTime},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 3:case"end":return r.stop()}}),r)})))),t.addEventListener("seeked",Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("student"!=e.$store.state.user.role){r.next=3;break}return r.next=3,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"seeked",zh_CN:"改变播放位置"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},result:{timestamp:t.currentTime},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 3:case"end":return r.stop()}}),r)})))),t.addEventListener("volumechange",Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("student"!=e.$store.state.user.role){r.next=3;break}return r.next=3,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"volumechanged",zh_CN:"改变音量"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},result:{timestamp:t.currentTime,volume:t.volume},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 3:case"end":return r.stop()}}),r)})))),t.addEventListener("ended",Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("student"!=e.$store.state.user.role){t.next=3;break}return t.next=3,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"ended",zh_CN:"观看完"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 3:case"end":return t.stop()}}),t)})))),window.onunload=Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=document.getElementById("video"),""==e.videoPlay){t.next=5;break}if("student"!=e.$store.state.user.role){t.next=5;break}return t.next=5,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"watched",zh_CN:"观看"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},result:{timestamp:r.currentTime},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 5:return t.abrupt("return",1);case 6:case"end":return t.stop()}}),t)})))},beforeDestroy:function(){this.close()},watch:{playVideo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==r){e.next=5;break}if(a=document.getElementById("video"),"student"!=this.$store.state.user.role){e.next=5;break}return e.next=5,this.$http.post("statement",{actor:{objectType:"Agent",account:{id:this.$store.state.user._id,name:this.$store.state.user.username,realname:this.$store.state.user.realname}},verb:{id:r.file,display:{en_US:"watched",zh_CN:"观看"}},object:{id:r._id,definition:{name:r.name,type:"Video",course:this.playVideo.course}},result:{timestamp:a.currentTime},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},methods:{deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("blocks/".concat(e));case 2:t.fetch();case 3:case"end":return r.stop()}}),r)})))()},close:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.video,""==e.playVideo){t.next=5;break}if("student"!=e.$store.state.user.role){t.next=5;break}return t.next=5,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.playVideo.file,display:{en_US:"watched",zh_CN:"观看"}},object:{id:e.playVideo._id,definition:{name:e.playVideo.name,type:"Video",course:e.playVideo.course}},result:{timestamp:r.currentTime},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 5:return t.abrupt("return",1);case 6:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId),{params:{query:{populate:"blocks"}}});case 2:r=t.sent,e.course=r.data,e.data=r.data.blocks;case 5:case"end":return t.stop()}}),t)})))()},my:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId));case 2:r=t.sent,e.courseRole=r.data;case 4:case"end":return t.stop()}}),t)})))()},postBlock:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("blocks",e.block);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},showModal:function(){this.visible=!0},handleOk:function(e){var t=this;this.confirmLoading=!0,setTimeout((function(){t.visible=!1,t.postBlock(),t.confirmLoading=!1,t.fetch()}),0)},handleCancel:function(e){console.log("Clicked cancel button"),this.visible=!1},handleChange:function(e){if(e){if("uploading"===e.file.status)return void(this.loading=!0);"done"===e.file.status&&(this.block.file=e.file.response.url,this.block.course=this.courseId,this.loading=!1,this.$message.success("上传成功"))}},videoPlay:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.playVideo=e;case 1:case"end":return r.stop()}}),r)})))()}}},B=P,W=(r("f2fd"),Object(l["a"])(B,U,T,!1,null,"fb698ec0",null)),H=W.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"debateContent"},[r("p",{staticStyle:{"font-size":"25px",display:"inline-block"}},[e._v("讨论区")]),r("a-button",{staticStyle:{float:"right","margin-right":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.initiate()}}},[e._v("发起主题")]),r("hr"),r("a-list",{attrs:{id:"debateList"}},e._l(e.threads,(function(t){return r("a-list-item",{key:t._id},[r("div",{staticStyle:{width:"100%"}},[r("a",{staticStyle:{display:"block","font-size":"18px","margin-bottom":"10px"},on:{click:function(r){return r.preventDefault(),e.openThread(t)}}},[e._v(e._s(t.title))]),r("div",{staticStyle:{color:"#b5b5b5","font-size":"16px"},domProps:{innerHTML:e._s(t.content)}})]),r("div",{staticStyle:{width:"300px",position:"relative",top:"30px"}},[r("span",{staticStyle:{"font-size":"10px","margin-right":"10px",color:"#00c758","font-weight":"bold"}},[e._v(e._s(t.user.username)+" ")]),r("span",{staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(e.time(t.createdAt))+" ")]),r("div",{staticStyle:{display:"inline-block",float:"right"}},[r("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"message"}}),r("span",{staticStyle:{height:"14px","line-height":"14px"}},[e._v("1")])],1)])])})),1)],1)},J=[],Y={props:{courseId:""},created:function(){this.fetch()},data:function(){return{date:new Date,threads:[]}},methods:{openThread:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("student"!=t.$store.state.user.role){r.next=3;break}return r.next=3,t.$http.post("statement",{actor:{objectType:"Agent",account:{id:t.$store.state.user._id,name:t.$store.state.user.username,realname:t.$store.state.user.realname}},verb:{id:t.$http.defaults.baseURL+"course/".concat(e._id,"/Thread"),display:{en_US:"debate",zh_CN:"参与讨论"}},object:{id:e._id,definition:{name:e.title,type:"Thread",course:t.courseId}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 3:t.$router.push("/course/".concat(t.courseId,"/debate/thread/").concat(e._id));case 4:case"end":return r.stop()}}),r)})))()},initiate:function(){this.$router.push("/course/".concat(this.courseId,"/debate/createThread"))},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("threads",{params:{query:{where:{type:"Course",object:e.courseId},limit:20}}});case 2:r=t.sent,a=r.data,e.threads=a;case 5:case"end":return t.stop()}}),t)})))()},time:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return r+"-"+a+"-"+n+" "+s+":"+o+":"+i}}},G=Y,X=(r("28db"),Object(l["a"])(G,K,J,!1,null,"b28e416a",null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"50px 0 0 70px"}},[r("a-page-header",{attrs:{title:"返回"},on:{back:function(t){return e.$router.push("/course/"+e.courseId+"/debate")}}}),r("a-form",{attrs:{form:e.form}},[r("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"主题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["theme",{rules:[{required:!0,message:"请输入主题"}]}],expression:"[\n          'theme',\n          { rules: [{ required: true, message: '请输入主题' }] },\n        ]"}],attrs:{placeholder:"主题内容"}})],1),r("vue-editor",{model:{value:e.thread.content,callback:function(t){e.$set(e.thread,"content",t)},expression:"thread.content"}}),r("a-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)},te=[],re=r("5873"),ae={labelCol:{span:2},wrapperCol:{span:8}},ne={labelCol:{span:4},wrapperCol:{span:8,offset:4}},se={components:{VueEditor:re["a"]},props:{courseId:""},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"dynamic_rule"})},data:function(){return{formItemLayout:ae,formTailLayout:ne,thread:{title:"",content:"",type:"Course",object:this.courseId}}},methods:{submit:function(){var e=this;this.form.validateFields(function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=10;break}return e.thread.title=e.form.getFieldValue("theme"),t.next=4,e.$http.post("threads",e.thread);case 4:if(a=t.sent,"student"!=e.$store.state.user.role){t.next=8;break}return t.next=8,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.$http.defaults.baseURL+"/threads",display:{en_US:"createThread",zh_CN:"创建"}},object:{id:a.data,definition:{name:e.thread.title,description:e.thread.content,type:"Thread",course:e.courseId}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 8:e.$router.push("/course/".concat(e.courseId,"/debate")),console.info("success");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},oe=se,ie=Object(l["a"])(oe,ee,te,!1,null,null,null),ce=ie.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"threadContent"},[r("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:e.thread.title}}),r("a-comment",{staticStyle:{padding:"0 30px"}},[r("a",{attrs:{slot:"author"},slot:"author"},[e._v(e._s(e.thread.user.username))]),r("a-avatar",{staticClass:"avatar",attrs:{slot:"avatar",icon:"user",alt:e.thread.user.username},slot:"avatar"}),r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.thread.content)},slot:"content"}),r("a-tooltip",{attrs:{slot:"datetime"},slot:"datetime"},[r("span",[e._v(e._s(e.time(e.thread.createdAt)))])])],1),r("div",[e.comments.length?r("a-list",{attrs:{"data-source":e.comments,header:e.comments.length+" 回复","item-layout":"horizontal"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[r("a-comment",{attrs:{author:t.user.username,content:t.content,datetime:e.time(t.createdAt)}},[r("a-avatar",{staticClass:"avatar",attrs:{slot:"avatar",icon:"user"},slot:"avatar"})],1)],1)}}],null,!1,3984209882)}):e._e(),r("a-comment",[r("a-avatar",{staticClass:"avatar",attrs:{slot:"avatar",alt:e.$store.state.user.username,icon:"user"},slot:"avatar"}),r("div",{attrs:{slot:"content"},slot:"content"},[r("a-form-item",[r("a-textarea",{attrs:{rows:4,value:e.value},on:{change:e.handleChange}})],1),r("a-form-item",[r("a-button",{attrs:{"html-type":"submit",loading:e.submitting,type:"primary"},on:{click:e.handleSubmit}},[e._v(" 回复 ")])],1)],1)],1)],1)],1)},le=[],de=r("c1df"),me=r.n(de),pe={created:function(){this.fetchThread(),this.fetchComment(),console.log(this.thread)},props:{threadId:"",courseId:""},data:function(){return{moment:me.a,thread:{},comments:[],submitting:!1,value:""}},methods:{fetchThread:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("threads/".concat(e.threadId));case 2:r=t.sent,a=r.data,e.thread=a,console.log(e.thread);case 6:case"end":return t.stop()}}),t)})))()},fetchComment:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("comments",{params:{query:{where:{type:"Thread",object:e.threadId},limit:20}}});case 2:r=t.sent,a=r.data,e.comments=a;case 5:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value){t.next=2;break}return t.abrupt("return");case 2:return e.submitting=!0,r={content:e.value,type:"Thread",object:e.threadId},t.next=6,e.$http.post("comments",r);case 6:if(t.sent,"student"!=e.$store.state.user.role){t.next=10;break}return t.next=10,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.$http.defaults.baseURL+"/comments",display:{en_US:"comment",zh_CN:"评论",content:r.content}},object:{id:e.thread._id,definition:{name:e.thread.title,description:e.thread.content,type:"Thread",course:e.courseId}},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 10:e.fetchComment(),e.submitting=!1,e.value="";case 13:case"end":return t.stop()}}),t)})))()},handleChange:function(e){this.value=e.target.value},time:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return r+"-"+a+"-"+n+" "+s+":"+o+":"+i}}},fe=pe,he=(r("1ab8"),Object(l["a"])(fe,ue,le,!1,null,"764c8e30",null)),be=he.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"coursewarePage"},[r("p",{staticStyle:{"font-size":"25px",display:"inline-block"}},[e._v("课件")]),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{staticStyle:{float:"right","margin-right":"40px"},attrs:{type:"primary"},on:{click:e.showModal}},[e._v(" 添加课件 ")]):e._e(),r("hr"),r("a-list",{staticClass:"coursewarePageList",attrs:{size:"large","data-source":e.data},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return r("a-list-item",{},[e._v(" "+e._s(t.name)+" "),e.$store.state.user._id==e.courseRole.createUser?r("a",{staticStyle:{float:"right"},on:{click:function(r){return e.deleteItem(t._id)}}},[e._v("删除")]):e._e(),r("a",{staticStyle:{float:"right","margin-right":"8px"},on:{click:function(r){return e.deleteItem(t.file,t.name,t._id)}}},[e._v("下载")])])}}])}),r("a-modal",{attrs:{title:"Title",visible:e.visible,"confirm-loading":e.confirmLoading,"destroy-on-close":!0},on:{ok:e.handleCreate,cancel:e.handleCancel}},[r("a-form",{attrs:{layout:"vertical",form:e.form}},[r("a-form-item",{attrs:{label:"课件名称"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'title',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请输入名称',\n                },\n              ],\n            },\n          ]"}]})],1)],1),r("a-upload",{attrs:{name:"file",multiple:!1,action:e.$http.defaults.baseURL+"/upload"},on:{change:e.handleChange}},[r("a-button",[r("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传 ")],1)],1)],1)],1)},ve=[],ye=(r("3ca3"),r("ddb0"),r("2b3d"),{props:{courseId:""},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form_in_modal"})},created:function(){this.fetch(),this.my()},data:function(){return{data:"",visible:!1,confirmLoading:!1,Courseware:{name:"",file:"",course:"",createUser:""},courseRole:""}},methods:{my:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId));case 2:r=t.sent,e.courseRole=r.data;case 4:case"end":return t.stop()}}),t)})))()},downloadFile:function(e,t,r){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=new XMLHttpRequest,s.open("GET",e,!0),s.responseType="blob",s.onload=function(e){var r=window.URL.createObjectURL(s.response),a=document.createElement("a");a.href=r,a.download=t,a.click()},s.send(),"student"!=a.$store.state.user.role){n.next=8;break}return n.next=8,a.$http.post("statement",{actor:{objectType:"Agent",account:{id:a.$store.state.user._id,name:a.$store.state.user.username,realname:a.$store.state.user.realname}},verb:{id:e,display:{en_US:"download",zh_CN:"下载"}},object:{id:r,definition:{name:t,type:"Courseware",course:a.courseId}},createdAt:(new Date).toLocaleString()});case 8:case"end":return n.stop()}}),n)})))()},deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("coursewares/".concat(e));case 2:t.fetch();case 3:case"end":return r.stop()}}),r)})))()},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("coursewares",{params:{query:{where:{course:e.courseId},limit:20}}});case 2:r=t.sent,e.data=r.data;case 4:case"end":return t.stop()}}),t)})))()},showModal:function(){this.visible=!0},handleCancel:function(){this.visible=!1,this.Courseware={name:"",file:"",course:"",createUser:""}},handleCreate:function(){var e=this;this.form.validateFields(function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return e.Courseware.name=e.form.getFieldValue("title"),t.next=5,e.$http.post("/coursewares",e.Courseware);case 5:console.log("Received values of form: ",a),e.form.resetFields(),e.visible=!1,e.fetch();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())},handleChange:function(e){console.log(e),"uploading"!==e.file.status&&("done"===e.file.status?(this.Courseware.file=e.file.response.url,this.Courseware.course=this.courseId,this.Courseware.createUser=this.$store.state.user._id):"error"===e.file.status&&this.$message.error("".concat(e.file.name," file upload failed.")))}}}),we=ye,xe=(r("a364"),Object(l["a"])(we,ge,ve,!1,null,"258a2ae0",null)),ke=xe.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"work"},[r("p",{staticStyle:{"font-size":"25px",display:"inline-block"}},[e._v("作业")]),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{staticStyle:{float:"right","margin-right":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/work/createWork")}}},[e._v("添加作业")]):e._e(),r("hr"),r("a-list",{staticStyle:{width:"1100px"}},e._l(e.workList,(function(t){return r("a-list-item",{key:t._id},[r("a",{staticStyle:{"font-size":"20px"},on:{click:function(r){return e.work(t._id)}}},[e._v(e._s(t.title))]),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.deleteItem(t._id)}}},[e._v("删除")]):e._e()],1)})),1)],1)},je=[],$e={props:{courseId:""},created:function(){this.fetch(),this.my()},data:function(){return{workList:[],courseRole:""}},methods:{deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("works/".concat(e));case 2:t.fetch();case 3:case"end":return r.stop()}}),r)})))()},my:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId));case 2:r=t.sent,e.courseRole=r.data;case 4:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("works",{params:{query:{where:{course:e.courseId},limit:10}}});case 2:r=t.sent,a=r.data,e.workList=a;case 5:case"end":return t.stop()}}),t)})))()},work:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("answer",{params:{query:{where:{object:e,user:t.$store.state.user._id}}}});case 2:a=r.sent,1==a.data?t.$router.push("/course/".concat(t.courseId,"/work/finishWork/").concat(e)):t.$router.push("/course/".concat(t.courseId,"/work/workPage/").concat(e));case 4:case"end":return r.stop()}}),r)})))()}}},Se=$e,Ie=(r("7fc5"),Object(l["a"])(Se,_e,je,!1,null,"79c81467",null)),Ce=Ie.exports,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"50px 0 0 70px",width:"1100px"}},[r("a-form-model",e._b({ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},"a-form-model",e.formItemLayout,!1),[r("a-form-model-item",{attrs:{label:"标题",prop:"work.title",rules:{required:!0,message:"标题不能为空",trigger:"blur"}}},[r("a-input",{attrs:{placeholder:"请输入标题"},model:{value:e.dynamicValidateForm.work.title,callback:function(t){e.$set(e.dynamicValidateForm.work,"title",t)},expression:"dynamicValidateForm.work.title"}})],1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("选择题")]),r("hr"),e._l(e.dynamicValidateForm.selectQuestions,(function(t,a){return r("div",{key:a},[r("a-form-model-item",e._b({attrs:{label:"题干",prop:"selectQuestions."+a+".title",rules:{required:!0,message:"题干不能为空",trigger:"blur"}}},"a-form-model-item",0===a?e.formItemLayout:{},!1),[r("a-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"请输入题干"},model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"domain.title"}}),r("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(r){return e.removeDomain(t)}}})],1),r("a-form-model-item",{attrs:{label:"A",prop:"selectQuestions."+a+".selectItem[0]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项A内容"},model:{value:t.selectItem[0],callback:function(r){e.$set(t.selectItem,0,r)},expression:"domain.selectItem[0]"}})],1),r("a-form-model-item",{attrs:{label:"B",prop:"selectQuestions."+a+".selectItem[1]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项B内容"},model:{value:t.selectItem[1],callback:function(r){e.$set(t.selectItem,1,r)},expression:"domain.selectItem[1]"}})],1),r("a-form-model-item",{attrs:{label:"C",prop:"selectQuestions."+a+".selectItem[2]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项C内容"},model:{value:t.selectItem[2],callback:function(r){e.$set(t.selectItem,2,r)},expression:"domain.selectItem[2]"}})],1),r("a-form-model-item",{attrs:{label:"D",prop:"selectQuestions."+a+".selectItem[3]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项D内容"},model:{value:t.selectItem[3],callback:function(r){e.$set(t.selectItem,3,r)},expression:"domain.selectItem[3]"}})],1),r("a-form-model-item",{attrs:{label:"正确答案",prop:"selectQuestions."+a+".trueItem",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:t.trueItem,callback:function(r){e.$set(t,"trueItem",r)},expression:"domain.trueItem"}},[r("a-radio-button",{attrs:{value:"A"}},[e._v(" A ")]),r("a-radio-button",{attrs:{value:"B"}},[e._v(" B ")]),r("a-radio-button",{attrs:{value:"C"}},[e._v(" C ")]),r("a-radio-button",{attrs:{value:"D"}},[e._v(" D ")])],1)],1),r("a-form-model-item",{attrs:{label:"分值",prop:"selectQuestions."+a+".score",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input-number",{attrs:{id:"inputNumber",min:0},model:{value:t.score,callback:function(r){e.$set(t,"score",r)},expression:"domain.score"}})],1)],1)})),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:e.addDomain}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 添加 ")],1)],1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("判断题")]),r("hr"),e._l(e.dynamicValidateForm.judgmentQuestions,(function(t,a){return r("div",{key:a+"judgmentQuestions"},[r("a-form-model-item",e._b({attrs:{label:"题干",prop:"judgmentQuestions."+a+".title",rules:{required:!0,message:"题干不能为空",trigger:"blur"}}},"a-form-model-item",0===a?e.formItemLayout:{},!1),[r("a-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"请输入题干"},model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"domain.title"}}),r("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(r){return e.removeDomain(t)}}})],1),r("a-form-model-item",{attrs:{label:"正确答案",prop:"judgmentQuestions."+a+".answer",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:t.answer,callback:function(r){e.$set(t,"answer",r)},expression:"domain.answer"}},[r("a-radio-button",{attrs:{value:"true"}},[e._v(" 对 ")]),r("a-radio-button",{attrs:{value:"false"}},[e._v(" 错 ")])],1)],1),r("a-form-model-item",{attrs:{label:"分值",prop:"judgmentQuestions."+a+".score",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input-number",{attrs:{id:"inputNumber",min:0},model:{value:t.score,callback:function(r){e.$set(t,"score",r)},expression:"domain.score"}})],1)],1)})),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:e.addjudgmentQuestion}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 添加 ")],1)],1),r("hr"),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v(" 提交 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v(" 重置 ")]),r("div",{staticStyle:{float:"right","margin-right":"20px","font-size":"20px"}},[r("span",[e._v("总分: ")]),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.addtotalScore))])])],1)],2)],1)},Oe=[],Fe=(r("cb29"),r("c975"),r("a434"),r("a9e3"),{props:{courseId:""},data:function(){return{formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},dynamicValidateForm:{work:{title:"",totalScore:new Number,course:this.courseId},selectQuestions:[],judgmentQuestions:[]}}},methods:{submitForm:function(e){var t=this;this.dynamicValidateForm.work.totalScore=this.addtotalScore,this.$refs[e].validate(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){var a,n,s,o,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return e.next=3,t.$http.post("works",t.dynamicValidateForm.work);case 3:a=e.sent,n=a.data,s=Object(_["a"])(t.dynamicValidateForm.selectQuestions);try{for(s.s();!(o=s.n()).done;)i=o.value,i.object=n._id}catch(d){s.e(d)}finally{s.f()}c=Object(_["a"])(t.dynamicValidateForm.judgmentQuestions);try{for(c.s();!(u=c.n()).done;)l=u.value,l.object=n._id}catch(d){c.e(d)}finally{c.f()}return e.next=11,t.$http.post("select-questions",t.dynamicValidateForm.selectQuestions);case 11:return e.next=13,t.$http.post("judgment-questions",t.dynamicValidateForm.judgmentQuestions);case 13:t.$router.back(),e.next=19;break;case 16:return console.log("error submit!!"),console.log(t.dynamicValidateForm.work),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.dynamicValidateForm.selectQuestions.indexOf(e);-1!==t&&this.dynamicValidateForm.selectQuestions.splice(t,1)},addDomain:function(){this.dynamicValidateForm.selectQuestions.push({title:"",selectItem:[4].fill(""),trueItem:"",score:new Number,type:"Work",Object:""})},addjudgmentQuestion:function(){this.dynamicValidateForm.judgmentQuestions.push({title:"",answer:new Boolean,score:new Number,type:"Work",object:""})}},computed:{addtotalScore:function(){var e,t=0,r=Object(_["a"])(this.dynamicValidateForm.selectQuestions);try{for(r.s();!(e=r.n()).done;){var a=e.value;t+=a.score}}catch(i){r.e(i)}finally{r.f()}var n,s=Object(_["a"])(this.dynamicValidateForm.judgmentQuestions);try{for(s.s();!(n=s.n()).done;){var o=n.value;t+=o.score}}catch(i){s.e(i)}finally{s.f()}return t}}}),Le=Fe,Ae=(r("38d0"),Object(l["a"])(Le,Re,Oe,!1,null,"6947421a",null)),Ve=Ae.exports,qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"50px 0 0 70px",width:"1100px"}},[r("a-form-model",{ref:"form",attrs:{model:e.form}},[r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("选择题")]),r("hr"),r("a-list",e._l(e.form.selectQuestions,(function(t,a){return r("a-list-item",{key:a},[r("a-form-model-item",{attrs:{prop:"answer.select."+a,rules:{required:!0,message:"请填写答案",trigger:"blur"}}},[r("select-question",{attrs:{selectItem:t.selectItem,title:t.title,index:a,score:t.score},model:{value:e.form.answer.select[a],callback:function(t){e.$set(e.form.answer.select,a,t)},expression:"form.answer.select[index]"}})],1)],1)})),1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("判断题")]),r("hr"),r("a-list",e._l(e.form.judgmentQuestions,(function(t,a){return r("a-list-item",{key:a},[r("a-form-model-item",{attrs:{prop:"answer.judgment."+a,rules:{required:!0,message:"请填写答案",trigger:"blur"}}},[r("judgment-queetion",{attrs:{title:t.title,index:a,score:t.score},model:{value:e.form.answer.judgment[a],callback:function(t){e.$set(e.form.answer.judgment,a,t)},expression:"form.answer.judgment[index]"}})],1)],1)})),1),r("a-form-model-item",[r("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.submitForm("form")}}},[e._v(" 提交 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("form")}}},[e._v(" 重置 ")])],1)],1)],1)},Ee=[],ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v(e._s("("+(e.index+1)+")、")+e._s(e.title)+e._s(" ("+e.score+"分)"))]),r("a-radio-group",{on:{change:function(t){return e.$emit("change",t.target.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("a-radio",{style:e.radioStyle,attrs:{value:"A"}},[r("span",{staticClass:"itemStyle"},[e._v("A.")]),e._v(" "+e._s(e.selectItem[0])+" ")]),r("a-radio",{style:e.radioStyle,attrs:{value:"B"}},[r("span",{staticClass:"itemStyle"},[e._v("B.")]),e._v(" "+e._s(e.selectItem[1])+" ")]),r("a-radio",{style:e.radioStyle,attrs:{value:"C"}},[r("span",{staticClass:"itemStyle"},[e._v("C.")]),e._v(" "+e._s(e.selectItem[2])+" ")]),r("a-radio",{style:e.radioStyle,attrs:{value:"D"}},[r("span",{staticClass:"itemStyle"},[e._v("D.")]),e._v(" "+e._s(e.selectItem[3])+" ")])],1)],1)},Qe=[],De={model:{prop:"select",event:"change"},props:{selectItem:{required:!0},title:{required:!0},index:{required:!0},score:{required:!0}},data:function(){return{value:"",radioStyle:{display:"block",height:"50px",lineHeight:"50px"}}},methods:{}},Ue=De,Te=(r("e955"),Object(l["a"])(Ue,ze,Qe,!1,null,"24dc44fb",null)),Ne=Te.exports,Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v(e._s("("+(e.index+1)+")、")+e._s(e.title)+e._s(" ("+e.score+"分)"))]),r("a-radio-group",{on:{change:function(t){return e.$emit("change",t.target.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("a-radio",{attrs:{value:"true"}},[e._v(" 对 ")]),r("a-radio",{attrs:{value:"false"}},[e._v(" 错 ")])],1)],1)},Pe=[],Be={model:{prop:"judgment",event:"change"},props:{title:{required:!0},index:{required:!0},score:{required:!0}},data:function(){return{value:""}},methods:{}},We=Be,He=Object(l["a"])(We,Me,Pe,!1,null,"150ede46",null),Ke=He.exports,Je={components:{SelectQuestion:Ne,JudgmentQueetion:Ke},props:{workId:"",courseId:""},created:function(){this.fetch()},data:function(){return{work:{},form:{answer:{user:"",select:[],judgment:[],type:"Work",object:this.workId,userScore:0,totalScore:0,course:this.courseId},selectQuestions:[],judgmentQuestions:[]}}},methods:{fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("works/".concat(e.workId));case 2:r=t.sent,a=r.data,console.log(a),e.work=a,e.form.selectQuestions=a.selectQuestions,e.form.judgmentQuestions=a.judgmentQuestions,e.form.answer.totalScore=a.totalScore;case 8:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return e.next=3,t.$http.post("answer",t.form.answer);case 3:if(a=e.sent,"student"!=t.$store.state.user.role){e.next=7;break}return e.next=7,t.$http.post("statement",{actor:{objectType:"Agent",account:{id:t.$store.state.user._id,name:t.$store.state.user.username,realname:t.$store.state.user.realname}},verb:{id:t.$http.defaults.baseURL+"/answer",display:{en_US:"answer",zh_CN:"完成"}},object:{id:t.work._id,definition:{name:t.work.title,type:"Work",course:t.work.course}},result:{totalScore:a.data.totalScore,scored:a.data.scored},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 7:t.$router.back(),e.next=12;break;case 10:return console.log("error submit!!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},Ye=Je,Ge=Object(l["a"])(Ye,qe,Ee,!1,null,null,null),Xe=Ge.exports,Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("p",{staticClass:"p",staticStyle:{color:"green"}},[e._v("已完成")]),r("p",{staticClass:"p"},[r("span",{staticStyle:{color:"Red"}},[e._v(e._s(e.score)+" / "+e._s(e.totalScore))]),e._v("分 ")])])},et=[],tt={props:{workId:""},data:function(){return{score:0,totalScore:0}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("answer/score",{params:{query:{where:{object:e.workId,user:e.$store.state.user._id}}}});case 2:r=t.sent,e.score=r.data.score,e.totalScore=r.data.totalScore;case 5:case"end":return t.stop()}}),t)})))()}}},rt=tt,at=(r("7327"),Object(l["a"])(rt,Ze,et,!1,null,"5e240406",null)),nt=at.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"work"},[r("p",{staticStyle:{"font-size":"25px",display:"inline-block"}},[e._v("考试")]),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{staticStyle:{float:"right","margin-right":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/course/"+e.courseId+"/exam/createExam")}}},[e._v("添加考试")]):e._e(),r("hr"),r("a-list",{staticStyle:{width:"1100px"}},e._l(e.examList,(function(t){return r("a-list-item",{key:t._id},[r("a",{staticStyle:{"font-size":"20px"},on:{click:function(r){return e.exam(t._id)}}},[e._v(e._s(t.title))]),e.$store.state.user._id==e.courseRole.createUser?r("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.deleteItem(t._id)}}},[e._v("删除")]):e._e()],1)})),1)],1)},ot=[],it={props:{courseId:""},created:function(){this.fetch(),this.my()},data:function(){return{examList:[],courseRole:""}},methods:{my:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/".concat(e.courseId));case 2:r=t.sent,e.courseRole=r.data;case 4:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("exam/".concat(e));case 2:t.fetch();case 3:case"end":return r.stop()}}),r)})))()},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("exam",{params:{query:{where:{course:e.courseId},limit:10}}});case 2:r=t.sent,a=r.data,e.examList=a;case 5:case"end":return t.stop()}}),t)})))()},exam:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("answer",{params:{query:{where:{object:e,user:t.$store.state.user._id}}}});case 2:a=r.sent,1==a.data?t.$router.push("/course/".concat(t.courseId,"/exam/finishExam/").concat(e)):t.$router.push("/course/".concat(t.courseId,"/exam/examPage/").concat(e));case 4:case"end":return r.stop()}}),r)})))()}}},ct=it,ut=(r("4020"),Object(l["a"])(ct,st,ot,!1,null,"50ba8616",null)),lt=ut.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"50px 0 0 70px",width:"1100px"}},[r("a-form-model",e._b({ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm}},"a-form-model",e.formItemLayout,!1),[r("a-form-model-item",{attrs:{label:"标题",prop:"exam.title",rules:{required:!0,message:"标题不能为空",trigger:"blur"}}},[r("a-input",{attrs:{placeholder:"请输入标题"},model:{value:e.dynamicValidateForm.exam.title,callback:function(t){e.$set(e.dynamicValidateForm.exam,"title",t)},expression:"dynamicValidateForm.exam.title"}})],1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("选择题")]),r("hr"),e._l(e.dynamicValidateForm.selectQuestions,(function(t,a){return r("div",{key:a},[r("a-form-model-item",e._b({attrs:{label:"题干",prop:"selectQuestions."+a+".title",rules:{required:!0,message:"题干不能为空",trigger:"blur"}}},"a-form-model-item",0===a?e.formItemLayout:{},!1),[r("a-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"请输入题干"},model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"domain.title"}}),r("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(r){return e.removeDomain(t)}}})],1),r("a-form-model-item",{attrs:{label:"A",prop:"selectQuestions."+a+".selectItem[0]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项A内容"},model:{value:t.selectItem[0],callback:function(r){e.$set(t.selectItem,0,r)},expression:"domain.selectItem[0]"}})],1),r("a-form-model-item",{attrs:{label:"B",prop:"selectQuestions."+a+".selectItem[1]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项B内容"},model:{value:t.selectItem[1],callback:function(r){e.$set(t.selectItem,1,r)},expression:"domain.selectItem[1]"}})],1),r("a-form-model-item",{attrs:{label:"C",prop:"selectQuestions."+a+".selectItem[2]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项C内容"},model:{value:t.selectItem[2],callback:function(r){e.$set(t.selectItem,2,r)},expression:"domain.selectItem[2]"}})],1),r("a-form-model-item",{attrs:{label:"D",prop:"selectQuestions."+a+".selectItem[3]",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input",{staticClass:"select-item",attrs:{placeholder:"选项D内容"},model:{value:t.selectItem[3],callback:function(r){e.$set(t.selectItem,3,r)},expression:"domain.selectItem[3]"}})],1),r("a-form-model-item",{attrs:{label:"正确答案",prop:"selectQuestions."+a+".trueItem",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:t.trueItem,callback:function(r){e.$set(t,"trueItem",r)},expression:"domain.trueItem"}},[r("a-radio-button",{attrs:{value:"A"}},[e._v(" A ")]),r("a-radio-button",{attrs:{value:"B"}},[e._v(" B ")]),r("a-radio-button",{attrs:{value:"C"}},[e._v(" C ")]),r("a-radio-button",{attrs:{value:"D"}},[e._v(" D ")])],1)],1),r("a-form-model-item",{attrs:{label:"分值",prop:"selectQuestions."+a+".score",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input-number",{attrs:{id:"inputNumber",min:0},model:{value:t.score,callback:function(r){e.$set(t,"score",r)},expression:"domain.score"}})],1)],1)})),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:e.addDomain}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 添加 ")],1)],1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("判断题")]),r("hr"),e._l(e.dynamicValidateForm.judgmentQuestions,(function(t,a){return r("div",{key:a+"judgmentQuestions"},[r("a-form-model-item",e._b({attrs:{label:"题干",prop:"judgmentQuestions."+a+".title",rules:{required:!0,message:"题干不能为空",trigger:"blur"}}},"a-form-model-item",0===a?e.formItemLayout:{},!1),[r("a-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"请输入题干"},model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"domain.title"}}),r("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(r){return e.removeDomain(t)}}})],1),r("a-form-model-item",{attrs:{label:"正确答案",prop:"judgmentQuestions."+a+".answer",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:t.answer,callback:function(r){e.$set(t,"answer",r)},expression:"domain.answer"}},[r("a-radio-button",{attrs:{value:"true"}},[e._v(" 对 ")]),r("a-radio-button",{attrs:{value:"false"}},[e._v(" 错 ")])],1)],1),r("a-form-model-item",{attrs:{label:"分值",prop:"judgmentQuestions."+a+".score",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input-number",{attrs:{id:"inputNumber",min:0},model:{value:t.score,callback:function(r){e.$set(t,"score",r)},expression:"domain.score"}})],1)],1)})),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:e.addjudgmentQuestion}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 添加 ")],1)],1),r("hr"),r("a-form-model-item",e._b({},"a-form-model-item",e.formItemLayoutWithOutLabel,!1),[r("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v(" 提交 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v(" 重置 ")]),r("div",{staticStyle:{float:"right","margin-right":"20px","font-size":"20px"}},[r("span",[e._v("总分: ")]),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.addtotalScore))])])],1),r("a-form-model-item",{attrs:{label:"正确答案",prop:"exam.time",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[r("a-input-number",{attrs:{id:"time",min:0},model:{value:e.dynamicValidateForm.exam.time,callback:function(t){e.$set(e.dynamicValidateForm.exam,"time",t)},expression:"dynamicValidateForm.exam.time"}}),r("span",[e._v("分钟")]),r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.dynamicValidateForm.exam.time<=0,expression:"dynamicValidateForm.exam.time <= 0"}],attrs:{type:"error",message:"请设置考试时长",banner:""}})],1)],2)],1)},mt=[],pt={props:{courseId:""},data:function(){return{formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},dynamicValidateForm:{exam:{title:"",totalScore:new Number,course:this.courseId,time:new Number},selectQuestions:[],judgmentQuestions:[]}}},methods:{submitForm:function(e){var t=this;this.dynamicValidateForm.exam.totalScore=this.addtotalScore,this.$refs[e].validate(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){var a,n,s,o,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(r&&t.dynamicValidateForm.exam.time>0)){e.next=16;break}return e.next=3,t.$http.post("exam",t.dynamicValidateForm.exam);case 3:a=e.sent,n=a.data,s=Object(_["a"])(t.dynamicValidateForm.selectQuestions);try{for(s.s();!(o=s.n()).done;)i=o.value,i.object=n._id}catch(d){s.e(d)}finally{s.f()}c=Object(_["a"])(t.dynamicValidateForm.judgmentQuestions);try{for(c.s();!(u=c.n()).done;)l=u.value,l.object=n._id}catch(d){c.e(d)}finally{c.f()}return e.next=11,t.$http.post("select-questions",t.dynamicValidateForm.selectQuestions);case 11:return e.next=13,t.$http.post("judgment-questions",t.dynamicValidateForm.judgmentQuestions);case 13:t.$router.back(),e.next=19;break;case 16:return console.log("error submit!!"),console.log(t.dynamicValidateForm.exam),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.dynamicValidateForm.selectQuestions.indexOf(e);-1!==t&&this.dynamicValidateForm.selectQuestions.splice(t,1)},addDomain:function(){this.dynamicValidateForm.selectQuestions.push({title:"",selectItem:[4].fill(""),trueItem:"",score:new Number,type:"Exam",object:""})},addjudgmentQuestion:function(){this.dynamicValidateForm.judgmentQuestions.push({title:"",answer:new Boolean,score:new Number,type:"Exam",object:""})}},computed:{addtotalScore:function(){var e,t=0,r=Object(_["a"])(this.dynamicValidateForm.selectQuestions);try{for(r.s();!(e=r.n()).done;){var a=e.value;t+=a.score}}catch(i){r.e(i)}finally{r.f()}var n,s=Object(_["a"])(this.dynamicValidateForm.judgmentQuestions);try{for(s.s();!(n=s.n()).done;){var o=n.value;t+=o.score}}catch(i){s.e(i)}finally{s.f()}return t}}},ft=pt,ht=(r("1291"),Object(l["a"])(ft,dt,mt,!1,null,"2352e703",null)),bt=ht.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"50px 0 0 70px",width:"1100px"}},[r("a-form-model",{ref:"form",attrs:{model:e.form}},[r("div",{staticStyle:{overflow:"hidden"}},[r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("选择题")]),r("a-statistic-countdown",{staticStyle:{"margin-right":"50px",float:"right"},attrs:{title:"考试倒计时",value:Date.now()+1e3*e.exam.time*60*2},on:{finish:function(t){return e.onFinish()}}})],1),r("hr"),r("a-list",e._l(e.form.selectQuestions,(function(t,a){return r("a-list-item",{key:a},[r("a-form-model-item",{attrs:{prop:"answer.select."+a,rules:{required:!0,message:"请填写答案",trigger:"blur"}}},[r("select-question",{attrs:{selectItem:t.selectItem,title:t.title,index:a,score:t.score},model:{value:e.form.answer.select[a],callback:function(t){e.$set(e.form.answer.select,a,t)},expression:"form.answer.select[index]"}})],1)],1)})),1),r("p",{staticStyle:{"font-size":"16px",display:"inline-block"}},[e._v("判断题")]),r("hr"),r("a-list",e._l(e.form.judgmentQuestions,(function(t,a){return r("a-list-item",{key:a},[r("a-form-model-item",{attrs:{prop:"answer.judgment."+a,rules:{required:!0,message:"请填写答案",trigger:"blur"}}},[r("judgment-queetion",{attrs:{title:t.title,index:a,score:t.score},model:{value:e.form.answer.judgment[a],callback:function(t){e.$set(e.form.answer.judgment,a,t)},expression:"form.answer.judgment[index]"}})],1)],1)})),1),r("a-form-model-item",[r("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.submitForm("form")}}},[e._v(" 提交 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.resetForm("form")}}},[e._v(" 重置 ")])],1)],1)],1)},vt=[],yt={components:{SelectQuestion:Ne,JudgmentQueetion:Ke},props:{examId:"",courseId:""},created:function(){this.fetch()},data:function(){return{exam:{},form:{answer:{user:"",select:[],judgment:[],type:"Exam",object:this.examId,userScore:0,totalScore:0,course:this.courseId},selectQuestions:[],judgmentQuestions:[]}}},methods:{onFinish:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("answer",e.form.answer);case 2:if(r=t.sent,"student"!=e.$store.state.user.role){t.next=6;break}return t.next=6,e.$http.post("statement",{actor:{objectType:"Agent",account:{id:e.$store.state.user._id,name:e.$store.state.user.username,realname:e.$store.state.user.realname}},verb:{id:e.$http.defaults.baseURL+"/answer",display:{en_US:"answer",zh_CN:"完成"}},object:{id:e.exam._id,definition:{name:e.exam.title,type:"Exam",course:e.exam.course}},result:{totalScore:r.data.totalScore,scored:r.data.scored,selectAnswer:e.form.answer.select,judgeAnswer:e.form.answer.judgment},createdAt:(new Date).toLocaleString()});case 6:e.$router.back();case 7:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("exam/".concat(e.examId));case 2:r=t.sent,a=r.data,e.exam=a,e.form.selectQuestions=a.selectQuestions,e.form.judgmentQuestions=a.judgmentQuestions,e.form.answer.totalScore=a.totalScore;case 7:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return e.next=3,t.$http.post("answer",t.form.answer);case 3:if(a=e.sent,"student"!=t.$store.state.user.role){e.next=7;break}return e.next=7,t.$http.post("statement",{actor:{objectType:"Agent",account:{id:t.$store.state.user._id,name:t.$store.state.user.username,realname:t.$store.state.user.realname}},verb:{id:t.$http.defaults.baseURL+"/answer",display:{en_US:"answer",zh_CN:"完成"}},object:{id:t.exam._id,definition:{name:t.exam.title,type:"Exam",course:"".concat(t.exam.course)}},result:{totalScore:a.data.totalScore,scored:a.data.scored,selectAnswer:t.form.answer.select,judgeAnswer:t.form.answer.judgment},createdAt:(new Date).toLocaleString("chinese",{hour12:!1})});case 7:t.$router.back(),e.next=12;break;case 10:return console.log("error submit!!"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},wt=yt,xt=Object(l["a"])(wt,gt,vt,!1,null,null,null),kt=xt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("p",{staticClass:"p",staticStyle:{color:"green"}},[e._v("已完成")]),r("p",{staticClass:"p"},[r("span",{staticStyle:{color:"Red"}},[e._v(e._s(e.score)+" / "+e._s(e.totalScore))]),e._v("分 ")])])},jt=[],$t={props:{examId:""},data:function(){return{score:0,totalScore:0}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("answer/score",{params:{query:{where:{object:e.examId,user:e.$store.state.user._id}}}});case 2:r=t.sent,e.score=r.data.score,e.totalScore=r.data.totalScore;case 5:case"end":return t.stop()}}),t)})))()}}},St=$t,It=(r("45ff"),Object(l["a"])(St,_t,jt,!1,null,"558d1479",null)),Ct=It.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-layout",{staticStyle:{height:"100%"},attrs:{id:"components-layout-demo-custom-trigger"}},[r("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[r("a-menu",{attrs:{theme:"light",mode:"inline","default-selected-keys":["1"]}})],1),r("a-layout",[r("div",{staticClass:"content"},[r("a-layout-content",{style:{padding:"24px",background:"#fff",minHeight:"280px"}},[r("a-row",e._l(e.courseLists,(function(t){return r("a-list",{key:t._id,attrs:{grid:{gutter:16,column:4}}},[r("a-list-item",[r("a-card",{staticStyle:{width:"240px"},attrs:{hoverable:""},on:{click:function(r){return e.$router.push("course/"+t._id+"/video")}}},[r("img",{attrs:{slot:"cover",alt:t.name,src:t.image},slot:"cover"}),r("a-card-meta",{attrs:{title:t.name}})],1)],1)],1)})),1)],1)],1)])],1)],1)},Ot=[],Ft={data:function(){return{collapsed:!1,url:"",imageUrl:"",loading:!1,ModalText:"Content of the modal",visible:!1,visibleAdd:!1,confirmLoading:!1,confirmLoadingAdd:!1,courseLists:"",nowItem:"",myCourse:""}},created:function(){this.fetchMyCourseList()},methods:{fetchMyCourseList:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("student"!=e.$store.state.user.role){t.next=6;break}return t.next=3,e.$http.get("add-course",{params:{query:{where:{user:e.$store.state.user._id},populate:"course"}}});case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,e.$http.get("courses",{params:{query:{where:{createUser:e.$store.state.user._id}}}});case 8:t.t0=t.sent;case 9:if(r=t.t0,"student"==e.$store.state.user.role){for(a=[],n=0;n<r.data.length;n++)a.push(r.data[n].course);e.courseLists=a}else e.courseLists=r.data;console.log(e.courseLists);case 12:case"end":return t.stop()}}),t)})))()},addCourse:function(e){this.courseAdd.includes(e._id)?this.$router.push("course/".concat(e._id,"/video")):(this.showAddModal(),this.nowItem=e),console.log(e)}}},Lt=Ft,At=(r("2284"),Object(l["a"])(Lt,Rt,Ot,!1,null,null,null)),Vt=At.exports,qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"content"},[e._m(0),r("div",{staticClass:"card"},[r("div",{staticClass:"card-item"},[r("div",{staticClass:"item-left"},[r("a-icon",{staticClass:"icon",attrs:{type:"user"}})],1),r("div",{staticClass:"item-right"},[r("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.student.length))]),r("div",[e._v("学生数")])])]),r("div",{staticClass:"card-item"},[r("div",{staticClass:"item-left"},[r("a-icon",{staticClass:"icon",attrs:{type:"file"}})],1),r("div",{staticClass:"item-right"},[r("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.fileAmount))]),r("div",[e._v("文件数")])])]),r("div",{staticClass:"card-item"},[r("div",{staticClass:"item-left"},[r("a-icon",{staticClass:"icon",attrs:{type:"video-camera"}})],1),r("div",{staticClass:"item-right"},[r("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.blockAmount))]),r("div",[e._v("视频数")])])]),r("div",{staticClass:"card-item"},[r("div",{staticClass:"item-left"},[r("a-icon",{staticClass:"icon",attrs:{type:"sound"}})],1),r("div",{staticClass:"item-right"},[r("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.threadAmount))]),r("div",[e._v("讨论数")])])])]),e._m(1),e._m(2),r("div",{staticStyle:{margin:"30px 0 30px",width:"100%",height:"400px",display:"flex","justify-content":"space-between"}},[r("div",[r("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children","filter-option":e.filterOption},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},e._l(e.student,(function(t){return r("a-select-option",{key:t._id,attrs:{value:t.user._id}},[e._v(" "+e._s(t.user.realname)+" ")])})),1)],1),r("div",{},[r("a-list",{staticStyle:{width:"400px",height:"400px","margin-bottom":"50px",background:"white"},attrs:{accordion:"",bordered:"",pagination:e.pagination,"data-source":e.statement},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return r("a-list-item",{key:"item.title",class:[e.isActive===a?"active":"","listItem"],on:{click:function(r){return e.current(t,a)}}},[r("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.actor.account.realname))]),e._v(e._s(t.verb.display.zh_CN+"了")),r("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.object.definition.name))])])}}])})],1),r("div",{staticClass:"viewer"},[r("json-viewer",{staticStyle:{"margin-top":"-30px"},attrs:{value:e.currentItem,"expand-depth":5}})],1)]),r("div",[r("a-table",{attrs:{columns:e.columns,"data-source":e.studentData,pagination:e.paginationTable},scopedSlots:e._u([{key:"name",fn:function(t){return r("a",{},[e._v(e._s(t))])}}])})],1),e._m(3),r("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[r("div",{staticStyle:{"font-size":"30px","font-weight":"bold",width:"400px",height:"400px","text-align":"center",display:"flex","justify-content":"center","align-items":"center"}},[r("div",{staticStyle:{width:"250px",height:"200px"}},[r("div",[e._v(e._s(e.totalScore))]),r("div",[e._v("总分")])])]),r("div",{staticStyle:{width:"800px",height:"400px"},attrs:{id:"barChart"}})]),r("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"scatter"}})])])},Et=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{staticStyle:{"font-size":"20px"}},[e._v("课程总览")]),r("hr")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"lineChart"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{staticStyle:{"font-size":"20px"}},[e._v("学生学习记录")]),r("hr")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{staticStyle:{"font-size":"20px"}},[e._v("考试情况")]),r("hr")])}],zt=r("313e"),Qt=(r("86d5"),{props:{courseId:""},created:function(){this.fetch()},mounted:function(){this.barChart(),this.lineChart(),this.scatter()},data:function(){return{columns:[{title:"ID",dataIndex:"id",key:"id",ellipsis:!0},{title:"用户名",dataIndex:"username",key:"username",scopedSlots:{customRender:"name"}},{title:"学生姓名",dataIndex:"realname",key:"realname",ellipsis:!0},{title:"考试成绩",dataIndex:"score",key:"score",ellipsis:!0},{title:"学习记录总量",dataIndex:"record",key:"record",ellipsis:!0}],pagination:{onChange:function(e){console.log(e)},pageSize:7},paginationTable:{onChange:function(e){console.log(e)},pageSize:10},studentData:[],currentItem:"",statement:null,student:"",isActive:"",fileAmount:0,blockAmount:0,threadAmount:0,studentScore:new Array(5).fill(0),totalScore:0}},methods:{barChart:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("answer/allStudentScore",{params:{query:{where:{type:"Exam",course:e.courseId},populate:"user"}}});case 2:r=t.sent,e.totalScore=r.data[0].totalScore,a=Object(_["a"])(r.data),t.prev=5,a.s();case 7:if((n=a.n()).done){t.next=25;break}s=n.value,o=s.userScore/s.totalScore,t.t0=!0,t.next=t.t0===o<=.2?13:t.t0===(o>.2&&o<=.4)?15:t.t0===(o>.4&&o<=.6)?17:t.t0===(o>.6&&o<=.8)?19:21;break;case 13:return e.studentScore[0]+=1,t.abrupt("break",23);case 15:return e.studentScore[1]+=1,t.abrupt("break",23);case 17:return e.studentScore[2]+=1,t.abrupt("break",23);case 19:return e.studentScore[3]+=1,t.abrupt("break",23);case 21:return e.studentScore[4]+=1,t.abrupt("break",23);case 23:t.next=7;break;case 25:t.next=30;break;case 27:t.prev=27,t.t1=t["catch"](5),a.e(t.t1);case 30:return t.prev=30,a.f(),t.finish(30);case 33:i=zt["a"](document.getElementById("barChart")),c={title:{text:"考试正确率分布"},xAxis:{type:"category",data:["20%","20-40%","40-60%","60-80%","80-100%"]},yAxis:{type:"value",max:r.data.length},series:[{data:e.studentScore,type:"bar",showBackground:!0,backgroundStyle:{color:"#fff"}}]},i.setOption(c);case 36:case"end":return t.stop()}}),t,null,[[5,27,30,33]])})))()},lineChart:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,u,l,d,m,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("statement/courseStatement",{params:{query:{where:{course:e.courseId}}}});case 2:r=t.sent,a=["00:00","01:15","02:30","03:45","05:00","06:15","07:30","08:45","10:00","11:15","12:30","13:45","15:00","16:15","17:30","18:45","20:00","21:15","22:30","23:45"],n=[],s=Object(_["a"])(r.data);try{for(s.s();!(o=s.n()).done;)i=o.value,c=new Date(i.createdAt),n.push("".concat(c.getHours(),":").concat(c.getMinutes()))}catch(h){s.e(h)}finally{s.f()}u=new Array(20).fill(0),l=document.getElementById("lineChart"),d=zt["a"](l),m=0;case 11:if(!(m<n.length)){t.next=23;break}p=0;case 13:if(!(p<20)){t.next=20;break}if(!(n[m]<=a[p])){t.next=17;break}return u[p]++,t.abrupt("break",20);case 17:p++,t.next=13;break;case 20:m++,t.next=11;break;case 23:f={title:{text:"在线时间分布"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{data:u,type:"line",smooth:!0}]},f&&d.setOption(f);case 25:case"end":return t.stop()}}),t)})))()},scatter:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,u,l,d,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=document.getElementById("scatter"),a=zt["a"](r),s=[],t.next=5,e.$http.get("answer/allStudentScore",{params:{query:{where:{type:"Exam",course:e.courseId},populate:"user"}}});case 5:o=t.sent,i=[],c=Object(_["a"])(e.student),t.prev=8,c.s();case 10:if((u=c.n()).done){t.next=18;break}return l=u.value,t.next=14,e.$http.get("statement/amount",{params:{query:{where:{user:l.user.id,course:e.courseId}}}});case 14:d=t.sent,i.push({key:l._id,id:l.user.id,username:l.user.username,realname:l.user.realname,record:d.data});case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](8),c.e(t.t0);case 23:return t.prev=23,c.f(),t.finish(23);case 26:m=0;case 27:if(!(m<o.data.length)){t.next=39;break}p=0;case 29:if(!(p<i.length)){t.next=36;break}if(o.data[m].user._id!=i[p].id){t.next=33;break}return s.push([i[p].record,o.data[m].userScore]),t.abrupt("break",36);case 33:p++,t.next=29;break;case 36:m++,t.next=27;break;case 39:n={title:{text:"成绩与活跃度分析图"},xAxis:{name:"学生活跃度"},yAxis:{name:"考试成绩"},series:[{symbolSize:20,data:s,type:"scatter"}]},n&&a.setOption(n);case 41:case"end":return t.stop()}}),t,null,[[8,20,23,26]])})))()},current:function(e,t){this.currentItem=e,this.isActive=t},fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("add-course",{params:{query:{where:{course:e.courseId},populate:"user"}}});case 2:return r=t.sent,e.student=r.data,t.next=6,e.$http.get("coursewares/amount",{params:{query:{where:{course:e.courseId}}}});case 6:return a=t.sent,e.fileAmount=a.data,t.next=10,e.$http.get("blocks/amount/amount",{params:{query:{where:{course:e.courseId}}}});case 10:return n=t.sent,e.blockAmount=n.data,t.next=14,e.$http.get("threads/amount/amount",{params:{query:{where:{object:e.courseId,type:"Course"}}}});case 14:s=t.sent,e.threadAmount=s.data,o=Object(_["a"])(e.student),t.prev=17,o.s();case 19:if((i=o.n()).done){t.next=30;break}return c=i.value,t.next=23,e.$http.get("statement/amount",{params:{query:{where:{user:c.user.id,course:e.courseId}}}});case 23:return u=t.sent,t.next=26,e.$http.get("answer/score",{params:{query:{where:{user:c.user.id,course:e.courseId,type:"Exam"}}}});case 26:l=t.sent,e.studentData.push({key:c._id,id:c.user.id,username:c.user.username,realname:c.user.realname,record:u.data,score:0!=l.data?"".concat(l.data.score,"/").concat(l.data.totalScore):"未答题"});case 28:t.next=19;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t["catch"](17),o.e(t.t0);case 35:return t.prev=35,o.f(),t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[17,32,35,38]])})))()},handleChange:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("statement",{params:{query:{where:{user:e,course:t.courseId}}}});case 2:a=r.sent,t.statement=a.data;case 4:case"end":return r.stop()}}),r)})))()},handleBlur:function(){console.log("blur")},handleFocus:function(){console.log("focus")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}}),Dt=Qt,Ut=(r("587c"),Object(l["a"])(Dt,qt,Et,!1,null,"3cabc8e1",null)),Tt=Ut.exports,Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-layout",{attrs:{id:"components-layout-demo-fixed-sider"}},[r("a-layout-sider",{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},[r("div",{staticClass:"logo"},[r("a-avatar",{style:{backgroundColor:"#ffbf00",verticalAlign:"middle"},attrs:{id:"avatar",size:"large"}},[e._v(" "+e._s(e.$store.state.user.username)+" ")]),r("a-button",{attrs:{id:"layout"},on:{click:e.layout}},[e._v("退出登录")])],1),r("a-menu",{attrs:{theme:"dark",mode:"inline","default-selected-keys":["4"]}},[r("a-menu-item",{key:"1",on:{click:function(t){return e.$router.push("/admin/adminUser")}}},[r("a-icon",{attrs:{type:"user"}}),r("span",{staticClass:"nav-text"},[e._v("用户管理")])],1),r("a-menu-item",{key:"2",on:{click:function(t){return e.$router.push("/admin/adminCourse")}}},[r("a-icon",{attrs:{type:"video-camera"}}),r("span",{staticClass:"nav-text"},[e._v("课程管理")])],1)],1)],1),r("a-layout",{style:{marginLeft:"200px"}},[r("a-layout-header",{style:{background:"#fff",padding:0}}),r("a-layout-content",{style:{margin:"24px 16px 0",overflow:"initial"}},[r("div",{style:{padding:"24px",background:"#fff",textAlign:"center"}},[r("router-view")],1)])],1)],1)},Mt=[],Pt={methods:{layout:function(){this.$cookies.remove("token"),this.$router.push("/login")}}},Bt=Pt,Wt=(r("0156"),Object(l["a"])(Bt,Nt,Mt,!1,null,null,null)),Ht=Wt.exports,Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-table",{attrs:{columns:e.columns,"data-source":e.data,bordered:""},scopedSlots:e._u([e._l(["id","username","realname","role"],(function(t){return{key:t,fn:function(a,n,s){return[r("div",{key:t},[n.editable?r("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(r){return e.handleChange(r.target.value,n._id,t)}}}):[e._v(" "+e._s(a)+" ")]],2)]}}})),{key:"operation",fn:function(t,a,n){return[r("div",{staticClass:"editable-row-operations"},[a.editable?r("span",[r("a",{on:{click:function(){return e.save(a._id)}}},[e._v("保存")]),r("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return e.cancel(a._id)}}},[r("a",[e._v("删除")])])],1):r("span",[r("a",{attrs:{disabled:""!==e.editingKey},on:{click:function(){return e.edit(a._id)}}},[e._v("编辑")])])])]}}],null,!0)})},Jt=[],Yt=(r("4de4"),r("d81d"),r("2909")),Gt=r("5530"),Xt=[{title:"id",dataIndex:"id",width:"25%",scopedSlots:{customRender:"id"}},{title:"用户名",dataIndex:"username",width:"15%",scopedSlots:{customRender:"username"}},{title:"真实姓名",dataIndex:"realname",width:"40%",scopedSlots:{customRender:"realname"}},{title:"权限",dataIndex:"role",scopedSlots:{customRender:"role"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],Zt={created:function(){this.fetch()},data:function(){return{cacheData:"",data:"",columns:Xt,editingKey:""}},methods:{fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users/allUsers");case 2:r=t.sent,e.data=r.data,e.cacheData=e.data.map((function(e){return Object(Gt["a"])({},e)})),console.log(e.data);case 6:case"end":return t.stop()}}),t)})))()},handleChange:function(e,t,r){var a=Object(Yt["a"])(this.data),n=a.filter((function(e){return t===e._id}))[0];n&&(n[r]=e,this.data=a)},edit:function(e){var t=Object(Yt["a"])(this.data),r=t.filter((function(t){return e===t._id}))[0];this.editingKey=e,r&&(r.editable=!0,this.data=t)},save:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(Yt["a"])(t.data),n=Object(Yt["a"])(t.cacheData),s=a.filter((function(t){return e===t._id}))[0],o=n.filter((function(t){return e===t._id}))[0],!s||!o){r.next=11;break}return delete s.editable,t.data=a,r.next=9,t.$http.put("users/".concat(s._id),s);case 9:Object.assign(o,s),t.cacheData=n;case 11:t.editingKey="";case 12:case"end":return r.stop()}}),r)})))()},cancel:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(Yt["a"])(t.data),n=a.filter((function(t){return e===t._id}))[0],t.editingKey="",!n){r.next=12;break}return Object.assign(n,t.cacheData.filter((function(t){return e===t._id}))[0]),r.next=7,t.$http.delete("users/".concat(n._id),n);case 7:return r.next=9,t.$http.delete("add-course",{params:{query:{where:{user:n._id}}}});case 9:delete n.editable,t.data=a,t.fetch();case 12:case"end":return r.stop()}}),r)})))()}}},er=Zt,tr=(r("15a8"),Object(l["a"])(er,Kt,Jt,!1,null,"3290bd08",null)),rr=tr.exports,ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-table",{attrs:{columns:e.columns,"data-source":e.data,bordered:""},scopedSlots:e._u([e._l(["id","name","image","createUser"],(function(t){return{key:t,fn:function(a,n,s){return[r("div",{key:t},[n.editable?r("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(r){return e.handleChange(r.target.value,n._id,t)}}}):[e._v(" "+e._s(a)+" ")]],2)]}}})),{key:"operation",fn:function(t,a,n){return[r("div",{staticClass:"editable-row-operations"},[a.editable?r("span",[r("a",{on:{click:function(){return e.save(a._id)}}},[e._v("保存")]),r("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return e.cancel(a._id)}}},[r("a",[e._v("删除")])])],1):r("span",[r("a",{attrs:{disabled:""!==e.editingKey},on:{click:function(){return e.edit(a._id)}}},[e._v("编辑")])])])]}}],null,!0)})},nr=[],sr=[{title:"id",dataIndex:"id",width:"25%",scopedSlots:{customRender:"id"}},{title:"课程名",dataIndex:"name",width:"15%",scopedSlots:{customRender:"name"}},{title:"封面",dataIndex:"image",width:"40%",scopedSlots:{customRender:"image"}},{title:"创建者",dataIndex:"createUser",scopedSlots:{customRender:"createUser"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],or={created:function(){this.fetch()},data:function(){return{cacheData:"",data:"",columns:sr,editingKey:""}},methods:{fetch:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("courses/amount/all");case 2:r=t.sent,e.data=r.data,e.cacheData=e.data.map((function(e){return Object(Gt["a"])({},e)})),console.log(e.data);case 6:case"end":return t.stop()}}),t)})))()},handleChange:function(e,t,r){var a=Object(Yt["a"])(this.data),n=a.filter((function(e){return t===e._id}))[0];n&&(n[r]=e,this.data=a)},edit:function(e){var t=Object(Yt["a"])(this.data),r=t.filter((function(t){return e===t._id}))[0];this.editingKey=e,r&&(r.editable=!0,this.data=t)},save:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(Yt["a"])(t.data),n=Object(Yt["a"])(t.cacheData),s=a.filter((function(t){return e===t._id}))[0],o=n.filter((function(t){return e===t._id}))[0],!s||!o){r.next=11;break}return delete s.editable,t.data=a,r.next=9,t.$http.put("courses/".concat(s._id),s);case 9:Object.assign(o,s),t.cacheData=n;case 11:t.editingKey="";case 12:case"end":return r.stop()}}),r)})))()},cancel:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(Yt["a"])(t.data),n=a.filter((function(t){return e===t._id}))[0],t.editingKey="",!n){r.next=13;break}return Object.assign(n,t.cacheData.filter((function(t){return e===t._id}))[0]),r.next=7,t.$http.delete("courses/".concat(n._id),n);case 7:return r.next=9,t.$http.delete("add-course",{params:{query:{where:{course:n._id}}}});case 9:delete n.editable,t.data=a,t.fetch();case 13:case"end":return r.stop()}}),r)})))()}}},ir=or,cr=(r("f20e"),Object(l["a"])(ir,ar,nr,!1,null,"41308590",null)),ur=cr.exports;a["default"].use(f["a"]);var lr=[{path:"/login",component:D,meta:{isPublic:!0}},{path:"/admin",component:Ht,beforeEnter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"admin"!=dr.app.$options.store.state.user.role?a("/"):a();case 1:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),children:[{path:"adminUser",name:"adminUser",component:rr},{path:"adminCourse",name:"adminCourse",component:ur}]},{path:"/",name:"Main",component:w,beforeEnter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"admin"==dr.app.$options.store.state.user.role?a("/admin"):a();case 1:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),children:[{path:"/",name:"home",component:I},{path:"/course/:courseId/video",component:A,props:!0,children:[{path:"/course/:courseId/video",component:H,props:!0,meta:{key:"1"}},{path:"/course/:courseId/debate",component:Z,props:!0,meta:{key:"2"}},{path:"/course/:courseId/debate/createThread",component:ce,props:!0,meta:{key:"2"}},{path:"/course/:courseId/debate/thread/:threadId",component:be,props:!0,meta:{key:"2"}},{path:"/course/:courseId/courseware",component:ke,props:!0,meta:{key:"3"}},{path:"/course/:courseId/work",component:Ce,props:!0,meta:{key:"4"}},{path:"/course/:courseId/work/workPage/:workId",component:Xe,props:!0,meta:{key:"4"},beforeEnter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,n){var s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.params,e.next=3,a["default"].prototype.$http.get("answer",{params:{query:{where:{work:s.workId,user:dr.app.$options.store.state.user._id}}}});case 3:o=e.sent,1==o.data?n("/course/".concat(s.courseId,"/work/finishWork/").concat(s.workId)):n();case 5:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/course/:courseId/work/createWork",component:Ve,props:!0,meta:{key:"4"}},{path:"/course/:courseId/work/finishWork/:workId",component:nt,props:!0,meta:{key:"4"}},{path:"/course/:courseId/exam",component:lt,props:!0,meta:{key:"5"}},{path:"/course/:courseId/exam/createExam",component:bt,props:!0,meta:{key:"5"}},{path:"/course/:courseId/exam/examPage/:examId",component:kt,props:!0,meta:{key:"5"},beforeEnter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,n){var s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.params,e.next=3,a["default"].prototype.$http.get("answer",{params:{query:{where:{work:s.examId,user:dr.app.$options.store.state.user._id}}}});case 3:o=e.sent,1==o.data?n("/course/".concat(s.courseId,"/exam/finishExam/").concat(s.workId)):n();case 5:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/course/:courseId/exam/finishExam/:examId",component:Ct,props:!0,meta:{key:"5"}},{path:"/course/:courseId/statement",component:Tt,props:!0,meta:{key:"6"},beforeEnter:function(e,t,r){"student"===dr.app.$options.store.state.user.role&&r("/"),r()}}]},{path:"/myCourse",component:Vt}]}],dr=new f["a"]({routes:lr});dr.beforeEach(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.meta.isPublic||a["default"].$cookies.get("token")){e.next=4;break}return e.abrupt("return",n("/login"));case 4:if(!a["default"].$cookies.get("token")){e.next=12;break}return e.next=7,a["default"].prototype.$http.get("/auth/user");case 7:s=e.sent,dr.app.$options.store.commit("SET_USER",s.data),n(),e.next=13;break;case 12:n();case 13:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}());var mr=f["a"].prototype.push;f["a"].prototype.push=function(e){return mr.call(this,e).catch((function(e){return e}))};var pr=dr,fr=r("2f62");a["default"].use(fr["a"]);var hr=new fr["a"].Store({state:{user:"",addCourse:[]},mutations:{SET_USER:function(e,t){e.user=t},SET_ADDCOURSE:function(e,t){e.addCourse=t},REMOVE_USER:function(e){e.user=[]},REMOVE_ADDCOURSE:function(e){e.addCourse=[]}},actions:{},modules:{}}),br=r("f23d"),gr=(r("202f"),r("349e")),vr=r.n(gr),yr=r("2b27"),wr=r.n(yr);a["default"].use(wr.a),a["default"].use(br["a"]),a["default"].use(vr.a),a["default"].use(M.a),a["default"].$cookies.config("7d"),a["default"].config.productionTip=!1;var xr=s.a.create({baseURL:"http://localhost:3000"});xr.interceptors.request.use((function(e){return a["default"].$cookies.get("token")&&(e.headers.Authorization="bearer "+a["default"].$cookies.get("token")),e}),(function(e){return Promise.reject(e)})),a["default"].prototype.$http=xr,new a["default"]({router:pr,store:hr,render:function(e){return e(m)}}).$mount("#app")},"587c":function(e,t,r){"use strict";r("657d")},"5ced":function(e,t,r){},"5eef":function(e,t,r){},6273:function(e,t,r){},"657d":function(e,t,r){},"703a":function(e,t,r){},7327:function(e,t,r){"use strict";r("8419")},"7d4a":function(e,t,r){},"7fc5":function(e,t,r){"use strict";r("3922")},"810d":function(e,t,r){},8419:function(e,t,r){},"85ec":function(e,t,r){},a052:function(e,t,r){},a364:function(e,t,r){"use strict";r("f388")},c2ac:function(e,t,r){"use strict";r("e7d8")},cccb:function(e,t,r){"use strict";r("5ced")},cf9f:function(e,t,r){},db27:function(e,t,r){},dfe5:function(e,t,r){},e7d8:function(e,t,r){},e955:function(e,t,r){"use strict";r("3b02")},ef1e:function(e,t,r){"use strict";r("dfe5")},f20e:function(e,t,r){"use strict";r("810d")},f2fd:function(e,t,r){"use strict";r("a052")},f388:function(e,t,r){}});
//# sourceMappingURL=app.13208b19.js.map